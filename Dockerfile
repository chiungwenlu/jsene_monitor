FROM ghcr.io/puppeteer/puppeteer:19.7.2

ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true \
    PUPPETEER_EXECUTABLE_PATH=/usr/bin/google-chrome-stable

# 設置 LINE Bot 的環境變量
ENV LINE_CHANNEL_SECRET=1d19cffe1095c7402b9c5ea498da3781 \
    LINE_CHANNEL_ACCESS_TOKEN=SbPThgkx60U6+eEFUDd8z2AqJkUbXeS211M0bs6z5GVpWR4oX+dWMYZuB0HiMKMVl/0HO6IVnnomNSY8DXlauUK7BlNyWnpf5mxdtJ7la4GADywEC0XqJBpZuXxsCkxtOd7BoyYQX1+YrSbQPMN7FwdB04t89/1O/w1cDnyilFU=

ENV FIREBASE_SERVICE_ACCOUNT='{"type":"service_account","project_id":"env-monitor-7167f","private_key_id":"6656159cfc52ec78759caae4d255045fafec7ba0","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQD7uQcsdf/zs3ZA\\nmHoxs7Onkz/8tyhom0N0JGCIRZKGDLQ2lJbsZakXphxeL5AuynooNbW34e0YXq/S\\nPQ/0ESs36xaxBqY/BmR8LZoNrbbJD5qBhXkgNEdqTTS08+dF9hrwg1oJv/wGmJbe\\nRqrdfZcWEZ69qPasU1SXFMTL0vyX1mYgvWhfMI0iIjiHQwu0jGaivSYw6nWDEVs/\\n407NVWvAS5i4Wfu8lio12OmBZvRoB8m/mzmSRmoh6RQkUYKA6n8If5be4f4pCl99\\n2mTth99mhqMNL/uuGsnqUUXURISxe4GU1EYt4Cmenk7GJgWrjWY+AfPwGs8qT8CT\\nPp/lAVrtAgMBAAECggEAD6z/3J2zlQhXxKGKOIalmTmzCiiY0Fzc6EJsrYfRnl3z\\nqhN6S5nwHAwo55ekLbnHvjHMEXm1E2ewINJTKEKac6bE+Ly+hR2/i7kmRxRKlf5O\\nA6NdfesriFvq/JrUy/dNya0QYhuN1RZTDOAPO3BbBJGP1mVLiUM+ORNexweqWcUt\\nZHQpceSG8CU1OmhzB2V76WtDZHRm1o3gcrRcJa7SVvuLBPYDTqEsi0Y17ppyJ/yX\\nyUX59hlFrEXxlUNhO94TS82Q9rqkqSCy8vQtTj3Tul8L+27OC+BE/gtvPgVv+WPv\\nnNZ39Sx6x9EQJ4MVMbk9djvfro4uHmwS/UTnj9utGQKBgQD+Mg7TVIUciJztq03z\\n1JTKF0FO/xv74FxSpSEZMRj1UfLXb5Fon8fw+zXkbwDTACFRPxMr1cglt5PIkXHg\\nbtTEsNvRdYBZ4CcpdslKibtGw16dUVHoLbRvnRDFy7M1oSMishnuBJ/HDowaqZe9\\ngzaHG45/1Ll9mcaVUxLX4KpUdQKBgQD9gnn2J1JNIhDVhe7zOKUnmTm1PwX0GE4B\\nlv3O7ONP4fExyG27E13S1RFPcfAof4RBmA2JCPUFi6YkZ3QzE85d8GbM75en19U7\\n6gxV1+mDyMJKS2XM9HhM8+tQ6dYajrJJuthHBy36UzyfroUMWEwiRMG1mOM6iavA\\njE+rziE9mQKBgCOaKT9qGBat/6S+GHXtMUW4yhnhWy8E9olQvXkEymUZrDSGWMxZ\\njKxw0tSCw4/J9eCmP+4kzBqUQquVy2hOvZgq2S7WETsFTRben0TEU6mOlYLdL+af\\n+CSl0AKUDC6Xug8S+NTAawx7Oh5F4I3XgdycfHHk/nHcBtdFQl9gBRs9AoGBAJkm\\nQdfbWXUPp2vXRcvZ5KxPfPVp5YbZSAbd2OcxZQHVVYjltKTXxk6gOZztEFDm+FdI\\nLKUkrCF1hCFp/mD9DibiHLih5dSYJ1HSyzDxBzl+ByIq+o0fA645jWeMXLQekMbK\\nAe6m/7fCoVU2cVpL3XK2Zu/2NRAgK4pfOaJpHNvBAoGBAM5SCZLhL6xRKatz8KnI\\nimgt9zrdm5vbI9QyllGPy0jZTIWs+ICM20Q+PegjDH7h+AnLDiVBcamxuJxGUXfM\\nsbLojbLDQDCihenkBCymhzoqRNciOAbgukKFZ1YcUzTgLcF74jiUs9xnduCHUXvf\\nUAef22W6XkhG6NdWCxBBJa0y'

# 設置 PM10 閾值
ENV PM10_THRESHOLD=6

WORKDIR /usr/src/app

COPY package*.json ./
RUN npm ci
COPY . .

CMD [ "node", "index.js" ]
